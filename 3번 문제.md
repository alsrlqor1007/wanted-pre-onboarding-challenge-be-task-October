## (3) 웹 브라우저에 `네이버`를 검색하고 화면에 네이버 화면이 출력이 될 때까지 내부적으로 어떤 동작들이 수행이 되는지 설명해주세요.

`네이버`를 검색해 `www.naver.com`에 접속하면 URL 정보를 파싱해서 HTTP 요청 메시지를 생성하고 OS 프로토콜 스택에 전송 요청을 한다.

하지만 도메인 주소로는 요청을 보낼 수 없기 때문에 `도메인 룩업(DNS Look up)` 작업을 통해 도메인의 IP 주소를 검색해서 IP 주소를 통해 요청을 보낸다.
다시 말해, 브라우저는 캐싱된 DNS(도메인 네임 시스템) 기록을 통해 URL에 대응하는 IP 주소가 있는지 확인한다.
여기서 DNS는 URL 이름과 IP 주소를 저장하고 있는 데이터베이스로 전화번호부와 비슷하다. 웹 사이트의 이름과 웹 사이트에 접근하기 위해 필요한 IP 주소를 저장하고 있다.
DNS 룩업 과정은 (크롬의 경우) `브라우저 → Host 파일 → DNS 캐시` 순서로 도메인에 매칭되는 IP를 찾는다.

요청한 URL이 캐시에 없으면, ISP의 DNS의 서버가 `www.naver.com`을 호스팅하고 있는 서버의 IP 주소를 찾기 위해 `DNS query`를 전송한다.
DNS query의 목적은 여러 다른 DNS 서버들을 검색해서 해당 사이트의 IP 주소를 찾는 것이다.  이를 `recursive search`라고 부른다.
IP 주소를 찾을 때까지 DNS 서버에서 다른 DNS 서버를 오가면서 반복적으로 검색하거나 끝까지 찾지 못해 에러가 발생할 때까지 검색한다.

결국 브라우저가 올바른 IP 주소를 받으면 서버와 `TCP 연결`을 한다. 브라우저는 인터넷 프로토콜을 사용해 서버와 연결되며, HTTP 요청의 경우에는 클라이언트와 서버 간 데이터 패킷들이 오가기 위해 보통 TCP를 사용한다.
TCP 연결을 위해서는 `3-way handshake`라는 프로세스를 통해 클라이언트와 서버 간 연결이 이루어진다.
클라이언트와 서버가 SYN과 ACK 메세지를 통해 3번의 프로세스를 거친 후 연결이 된다.

TCP 연결이 완료되면 데이터를 전송한다. 클라이언트의 브라우저는 HTTP `GET` 요청을 통해 서버에게 `www.naver.com` 웹 페이지를 요구한다.
요청을 할 때는 부가적인 정보도 함께 전달된다.

웹 서버는 브라우저로부터 요청을 받고, `request handler`에 요청을 전달해서 처리하고 `response를 생성`한다.
Request handler란 ASP.NET, PHP, Ruby 등으로 작성된 프로그램을 의미한다. 이 request handler는 요청과 요청의 헤더, 쿠키를 읽어 요청을 파악하고 서버에 정보를 업데이트하기도 한다.
그 다음, response를 특정한 포맷으로(JSON, XML, HTML) 작성하고 이 HTTP response를 보낸다.
서버의 response에는 요청한 웹페이지, status code, compression type(Content-Encoding) - 어떻게 인코딩 되어 있는지, 어떻게 페이지를 캐싱할지(Cache-Control), 설정할 쿠키가 있다면 쿠키, 개인정보 등이 포함된다.

Reponse를 받은 브라우저가 HTML content를 단계적으로 보여준다.
가장 먼저 HTML의 구조를 렌더링한 후, HTML 태그들을 확해 추가적으로 필요한 요소들을 요청한다.
정적인 파일들은 브라우저에 의해 캐싱이 되어, 해당 페이지를 재방문할 때 다시 서버로부터 불러오는 동일한 과정이 반복되지 않도록 한다.